<!--
  ~ Copyright (c) 2017. The Hyve and respective contributors
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~
  ~ See the file LICENSE in the root of this repository.
  ~
  -->

<div class="request-status-update-container" *ngIf="panelStyles">
    <form #statusUpdateForm="ngForm" class="form" role="form" (ngSubmit)="confirmStatusUpdate()">
        <div class="modal-header" [ngClass]="panelStyles.headerStyle">
            <h4 class="modal-title">
                <span class="material-icons">warning</span>&nbsp;
                <span [translate]="'request.statusupdate.' + status + '.question'"></span>
            </h4>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
                    (click)="close()">&times;
            </button>
        </div>
        <div class="modal-body">
            <pdm-alert-error></pdm-alert-error>

            <div class="form-group">
                <label for="messageSummary"
                       [translate]="'request.statusupdate.form.summary.label'"></label>

                <input type="text" class="form-control" name="messageSummary" id="messageSummary"
                       required minlength="1" maxlength="50" #messageSummary="ngModel"
                       autocomplete="off" placeholder="{{'request.statusupdate.form.summary.placeholder' | translate}}"
                       [(ngModel)]="message.summary"/>
            </div>
            <div class="form-group">
                <label for="messageDescription"
                       [translate]="'request.statusupdate.form.description.label'"></label>

                <textarea type="text" class="form-control" name="messageDescription" id="messageDescription"
                          autocomplete="off"
                          placeholder="{{'request.statusupdate.form.description.placeholder' | translate}}"
                          minlength="1" maxlength="500" rows="4" #messageDescription="ngModel"
                          [(ngModel)]="message.description">
                    </textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary test-cancel-btn" data-dismiss="modal" (click)="close()">
                <span class="material-icons">cancel</span>&nbsp;
                <span [translate]="'request.action.cancel'"></span>
            </button>
            <button type="submit" [disabled]="!statusUpdateForm.form.valid" class="btn test-submit-btn"
                    [ngClass]="panelStyles.buttonStyle">
                <span class="material-icons">send</span>&nbsp;
                <span [translate]="'request.action.submit'"
                      tooltip="Please provide at least a summary of your message."
                      [isDisabled]="statusUpdateForm.form.valid"></span>
            </button>
        </div>
    </form>
</div>
