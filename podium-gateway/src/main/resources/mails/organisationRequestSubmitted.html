<!DOCTYPE html>
<!--
  ~ Copyright (c) 2017  The Hyve and respective contributors.
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ See the file LICENSE in the root of this repository.
  -->

<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title th:text="#{email.organisationRequestSubmitted.title(${request.generateStringId()})}">BBMRI Podium Request Portal &ndash; {0} request has been submitted</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>
    <body>
        <p th:text="#{email.greeting(${user.firstName}, ${user.lastName})}">
            Dear
        </p>

        <p th:text="#{email.organisationRequestSubmitted.text1(${organisation.getName()})}">
            A new request has been submitted to your organisation.
        </p>

        <p>
            <span th:text="#{email.organisationRequestSubmitted.text2}">
                To open the request, please use the link below.
            </span>
            <br />
            <a th:href="@{|${baseUrl}/#/requests/detail/${request.getUuid()}|}">
                <span th:text="@{|${baseUrl}/#/requests/detail/${request.getUuid()}|}"></span>
            </a>
        </p>

        <p th:if="${request.relatedRequests.size() > 0}">
            <span th:text="#{email.organisationRequestSubmitted.relatedRequests}">
            </span>
            <br />
            <!-- List of organisations -->
			<ul>
				<li th:each="relatedRequest: ${request.getRelatedRequests()}">
					<span th:text="${relatedRequest.getId()}"></span>
                    <span> - </span>
                    <span th:each="organisation: ${relatedRequest.getOrganisations()}">
						[<span th:text="${organisation.getShortName()}"></span>]
                        <span th:text="${organisation.getName()}"></span>
					</span>
				</li>
			</ul>
        </p>
        <br />

        <div th:include="signature"></div>
    </body>
</html>
